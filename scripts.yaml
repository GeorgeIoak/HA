afs_30:
  alias: AFS OFF After 30min
  sequence:
  - entity_id: input_boolean.timer_30min
    service: input_boolean.toggle
  - entity_id: input_boolean.timer_60min
    service: input_boolean.turn_off
  - entity_id: input_boolean.timer_90min
    service: input_boolean.turn_off
  - condition: state
    entity_id: input_boolean.timer_30min
    state: 'on'
  - delay: 00:01:00
  - entity_id: script.garage_afs_off
    service: homeassistant.turn_on
  - entity_id: input_boolean.timer_30min
    service: input_boolean.turn_off
activate_hue_dynamic_scene:
  alias: Activate Hue dynamic scene
  mode: restart
  icon: mdi:power
  sequence:
  - condition: '{{is_state(''binary_sensor.selected_hue_group_active_scene'',''off'')}}

      '
  - service: scene.create
    data:
      scene_id: before_dynamic_scene
      snapshot_entities:
      - '{% set select = states(''input_select.hue_group'')|slugify %} {% set group
        =''light.'' + select %} {{group}}

        '
  - service: hue.activate_scene
    data:
      dynamic: true
      speed: '{{states(''input_number.hue_dynamic_scene_speed'')|int}}

        '
      brightness: '{{states(''input_number.hue_dynamic_scene_brightness'')|int}}

        '
    target:
      entity_id: '{% set select = states(''input_select.hue_dynamic_scene'')|slugify
        %} {{''scene.'' + select}}

        '
deactivate_hue_dynamic_scene:
  alias: Deactivate Hue dynamic scene
  mode: restart
  icon: mdi:power-off
  sequence:
  - condition: '{{is_state(''binary_sensor.selected_hue_group_active_scene'',''on'')}}

      '
  - service: hue.activate_scene
    data:
      dynamic: false
    target:
      entity_id: '{% set select = states(''input_select.hue_dynamic_scene'')|slugify
        %} {{''scene.'' + select}}

        '
  - service: scene.turn_on
    target:
      entity_id: scene.before_dynamic_scene
opensprinkler_restore_back_yard_stage_1_differences_only:
  alias: OpenSprinkler Restore — Back Yard (from 8/28 backup)
  sequence:
  - data:
      entity_id: switch.back_yard_program_enabled
    action: switch.turn_on
  - data:
      entity_id: switch.back_yard_program_program_use_weather
    action: switch.turn_on
  - data:
      entity_id: select.back_yard_program_additional_start_time_type
      option: Repeating
    action: select.select_option
  - data:
      entity_id: select.back_yard_program_restrictions
      option: None
    action: select.select_option
  - data:
      entity_id: select.back_yard_program_start_time_offset_type
      option: Midnight
    action: select.select_option
  - data:
      entity_id: select.back_yard_program_type
      option: Interval
    action: select.select_option
  - data:
      entity_id: number.back_yard_program_backyard_left_station_duration
      value: 20
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_backyard_right_station_duration
      value: 5
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_front_left_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_front_middle_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_front_right_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_interval_days
      value: 3
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_pond_station_duration
      value: 20
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_s07_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_s08_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_start_time_offset
      value: 1200
    action: number.set_value
  - data:
      entity_id: number.back_yard_program_starting_in_days
      value: 0
    action: number.set_value
  - data:
      entity_id: text.back_yard_program_program_name
      value: Back Yard
    action: text.set_value
  mode: single
opensprinkler_restore_front_yard_from_8_28_backup:
  alias: OpenSprinkler Restore — Front Yard (from 8/28 backup)
  sequence:
  - data:
      entity_id: switch.front_yard_program_enabled
    action: switch.turn_on
  - data:
      entity_id: switch.front_yard_program_program_use_weather
    action: switch.turn_on
  - data:
      entity_id: select.front_yard_program_additional_start_time_type
      option: Fixed
    action: select.select_option
  - data:
      entity_id: select.front_yard_program_restrictions
      option: None
    action: select.select_option
  - data:
      entity_id: select.front_yard_program_start_time_offset_type
      option: Midnight
    action: select.select_option
  - data:
      entity_id: select.front_yard_program_type
      option: Interval
    action: select.select_option
  - data:
      entity_id: number.front_yard_program_backyard_left_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_backyard_right_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_front_left_station_duration
      value: 60
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_front_middle_station_duration
      value: 60
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_front_right_station_duration
      value: 60
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_interval_days
      value: 3
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_pond_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_s07_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_s08_station_duration
      value: 0
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_start_time_offset
      value: 300
    action: number.set_value
  - data:
      entity_id: number.front_yard_program_starting_in_days
      value: 0
    action: number.set_value
  - data:
      entity_id: text.front_yard_program_program_name
      value: Front Yard
    action: text.set_value
  mode: single
  description: ''

reset_rain_meters:
  alias: Reset rain season & today to 0
  sequence:
    - service: utility_meter.calibrate
      target: { entity_id: sensor.rain_season }
      data: { value: 0 }
    - service: utility_meter.calibrate
      target: { entity_id: sensor.rain_today }
      data: { value: 0 }
  mode: single
